const { Scenes } = require('../../bot')
const sendPost = require('../../sendPost')
const connectDB = require('../../connectDB')

const firstTask = new Scenes.BaseScene('firstTask')

firstTask.on('message', async (ctx) => {
  if (!/–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª/i.test(ctx.message.text) && /–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ/i.test(ctx.message.text)) {
    await sendPost.sendTextWithButton(ctx, 'üëèüèª –¢—ã –º–æ–ª–æ–¥–µ—Ü! –í–∏–∂—É, —á—Ç–æ —Ç—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—á–µ—à—å –æ—Å–≤–æ–∏—Ç—å –Ω–æ–≤—É—é –ø—Ä–æ—Ñ–µ—Å—Å–∏—é –∏ –Ω–∞—á–∞—Ç—å –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –ª—é–±–∏–º–æ–º –¥–µ–ª–µ!\n\n–í–ø–µ—Ä–µ–¥! –ò —É —Ç–µ–±—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—Å—ë –ø–æ–ª—É—á–∏—Ç—Å—è üíØ\n\n–í —Å–ª–µ–¥—É—é—â–µ–º –≤–∏–¥–µ–æ —Ç—ã —É–∑–Ω–∞–µ—à—å –∫–∞–∫–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ø–ª–æ—â–∞–¥–∫–∏ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Å–≤–æ–∏—Ö —Ä–∞–±–æ—Ç –∏ –ø–æ–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤üëáüèª', [['–ü–ª–æ—â–∞–¥–∫–∏', 'btn_7']], true)
    connectDB.update(ctx.message.from?.id, '–ü–µ—Ä–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ', 'btn_100')
    ctx.scene.leave()
  } else if (/–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª/i.test(ctx.message.text)) {
    await sendPost.sendTextWithButton(ctx, 'üî•–°—É–ø–µ—Ä! –¢—ã —É–∂–µ –∑–Ω–∞–µ—à—å –∫–∞–∫ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–µ! –û—Å—Ç–∞–ª–æ—Å—å –Ω–∞–±—Ä–∞—Ç—å—Å—è –Ω–æ–≤—ã—Ö –∑–Ω–∞–Ω–∏–π –∏ —É–ª—É—á—à–∏—Ç—å —Å–≤–æ–∏ –Ω–∞–≤—ã–∫–∏ –≤ –ø—Ä–æ–¥–∞–∂–∞—Ö.\n\n–ò —è –≥–æ—Ç–æ–≤–∞ —Ç–µ–±–µ –≤ —ç—Ç–æ–º –ø–æ–º–æ—á—åü§ó\n–ñ–º–∏ –∫–Ω–æ–ø–∫—É –∏ —è —Ä–∞—Å—Å–∫–∞–∂—É –∫–∞–∫–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ø–ª–æ—â–∞–¥–∫–∏ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Å–≤–æ–∏—Ö —Ä–∞–±–æ—Ç –∏ –ø–æ–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤üëáüèª', [['–ü–ª–æ—â–∞–¥–∫–∏', 'btn_7']], true)
    connectDB.update(ctx.message.from?.id, '–ü–µ—Ä–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ', 'btn_100')
    ctx.scene.leave()
  } else sendPost.sendText(ctx, '–•–º, –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω—ã, –ø–æ–ø—Ä–æ–±—É–π –µ—â–µ')
})

module.exports.firstTask = firstTask
const { Scenes } = require('../../bot')
const sendPost = require('../../sendPost')
const connectDB = require('../../connectDB')

const secondTask = new Scenes.BaseScene('secondTask')

secondTask.on('message', async (ctx) => {
  if (/—Ä–∞–∑–º–µ—â–∞–ª/i.test(ctx.message.text) || /–∑–∞–∫–∞–∑—ã/i.test(ctx.message.text) || /—Ö–æ—á—É —É–∑–Ω–∞—Ç—å/i.test(ctx.message.text)) {
    await sendPost.sendTextWithButton(ctx, '–£—Ä–∞! ü•≥\n\n–¢—ã –≤—ã–ø–æ–ª–Ω–∏–ª –≤—Ç–æ—Ä–æ–µ –∑–∞–¥–∞–Ω–∏–µ –∏ –∑–∞ —ç—Ç–æ —Ç—ã –ø–æ–ª—É—á–∞–µ—à—å –Ω–µ –ø—Ä–æ—Å—Ç–æ –±–æ–Ω—É—Å–Ω—ã–µ 1500‚ÇΩ, –∞ –µ—â—ë –∏ –ø–æ–¥–∞—Ä–æ–∫ üéÅ\n\n–Ø –¥–∞—Ä—é —Ç–µ–±–µ —Ñ–∞–π–ª —Å –µ—â—ë –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–ª–æ—â–∞–¥–æ–∫, –≥–¥–µ —Ç—ã –º–æ–∂–µ—à—å —Ä–∞–∑–º–µ—â–∞—Ç—å —Å–≤–æ–∏ —Ä–∞–±–æ—Ç—ã –∏ —É–∂–µ —Å–µ–π—á–∞—Å –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã.\n\n–ö—Ä—É—Ç–æ? –ï—â—ë –∫–∞–∫! –¢—ã –∑–∞—Å–ª—É–∂–∏–ª, –ª–æ–≤–∏üëáüèª\n\n–ê —Ç–∞–∫–∂–µ –Ω–µ –∑–∞–±—É–¥—å –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –º–æ—é –≥—Ä—É–ø–ø—É –í–ö–æ–Ω—Ç–∞–∫—Ç–µ. –ú–Ω–µ –±—É–¥–µ—Ç –ø—Ä–∏—è—Ç–Ω–æ, –∞ —Ç—ã —Å–º–æ–∂–µ—à—å –Ω–∞–π—Ç–∏ —Ç–∞–º –µ—â—ë –±–æ–ª—å—à–µ –ø–æ–ª—å–∑—ãü§ó', [['üéÅ–ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª —Å –ø–ª–æ—â–∞–¥–∫–∞–º–∏üéÅ', 'btn_8'], ['–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –≥—Ä—É–ø–ø—É –í–ö–æ–Ω—Ç–∞–∫—Ç–µ', 'https://vk.com/valeriya.artist']], true)
      .then(() => {
        setTimeout(async () => {
          sendPost.sendTextWithButtonAfterPhoto(ctx, '–Ø –∑–Ω–∞—é –∫–∞–∫ —Å–ª–æ–∂–Ω–æ –±—ã–≤–∞–µ—Ç –Ω–∞—á–∏–Ω–∞—é—â–∏–º –ø–æ—Ä—Ç—Ä–µ—Ç–∏—Å—Ç–∞–º. –ò –∑–Ω–∞—é –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ —Ç–µ–±–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Å—Ç–∞–ª–∫–∏–≤–∞—Ç—å—Å—è. –ó–Ω–∞–π, –µ—Å–ª–∏ —É —Ç–µ–±—è —á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è - —ç—Ç–æ –Ω–µ –ø–æ—Ç–æ–º—É, —á—Ç–æ —Ç—ã –±–µ–∑–¥–∞—Ä–Ω—ã–π. –¢—ã –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞ —á–µ–≥–æ-—Ç–æ –Ω–µ –∑–Ω–∞–µ—à—åüë©üèª‚Äçüé®\n\n–£ –º–µ–Ω—è –µ—Å—Ç—å —Ä–µ—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç —Ç–µ–±–µ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å–æ –≤—Å–µ–º–∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏!\n\n–ñ–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –∏ —Å–º–æ—Ç—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–µ –≤–∏–¥–µ–æüëáüèª', [['–¢—Ä—É–¥–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏–∏ –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤', 'btn_10']], 0, './img/1.JPG', '‚úÖ–ù–∞–¥–µ—é—Å—å, —Ç—ã —É—Å–ø–µ–ª —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª\n‚úÖ–∏ –ø–æ–¥–ø–∏—Å–∞–ª—Å—è –Ω–∞ –º–æ—é –≥—Ä—É–ø–ø—É.\n–ù–∞ —ç—Ç–æ–º  —É –º–µ–Ω—è –¥–ª—è —Ç–µ–±—è –Ω–µ –≤—Å–µ.')
        }, 1000*30)
      })
    connectDB.update(ctx.message.from?.id, '–í—Ç–æ—Ä–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ', 'btn_102')
    ctx.scene.leave()
  } else sendPost.sendText(ctx, '–•–º, –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω—ã, –ø–æ–ø—Ä–æ–±—É–π –µ—â–µ')
})

module.exports.secondTask = secondTask
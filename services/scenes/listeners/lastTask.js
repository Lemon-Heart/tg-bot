const { Scenes } = require('../../bot')
const sendPost = require('../../sendPost')
const connectDB = require('../../connectDB')

const lastTask = new Scenes.BaseScene('lastTask')

lastTask.on('message', async (ctx) => {
  if (/–∑–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ/i.test(ctx.message.text)) {
    await sendPost.sendTextWithButtonAfterPhoto(ctx, '–ü–æ–∫–∞ —Ç—ã –∂–¥—ë—à—å –ø—Ä–æ–≤–µ—Ä–∫–∏, —è –¥–∞—Ä—é —Ç–µ–±–µ –º–µ—Ç–æ–¥–∏—á–∫—É –ø–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—é –≥—É–± üëÑ\n\n–¢—ã —Å–º–æ–∂–µ—à—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –æ—Ç–∫—Ä—ã—Ç—å —ç—Ç—É –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–æ, —á—Ç–æ –º—ã —Ä–∏—Å–æ–≤–∞–ª–∏ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —É—Ä–æ–∫–µ.\n\n–ß–µ–º —á–∞—â–µ —Ç—ã –±—É–¥–µ—à—å —Ä–∏—Å–æ–≤–∞—Ç—å, —Ç–µ–º —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–µ–µ —É —Ç–µ–±—è –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å—Å—è —Å –∫–∞–∂–¥—ã–º —Ä–∞–∑–æ–ºüôÉ', [['–°–∫–∞—á–∞—Ç—å –º–µ—Ç–æ–¥–∏—á–∫—É', 'btn_13']], 0, './img/3.JPG', '–¢—ã —Å–∞–º—ã–π –ª—É—á—à–∏–π —É—á–µ–Ω–∏–∫! –í—ã–ø–æ–ª–Ω–∏–ª –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è –∏ –∑–∞—Å–ª—É–∂–∏–ª –µ—â—ë –æ–¥–∏–Ω –ø–æ–¥–∞—Ä–æ–∫ üéÅ')
      .then(() => {
        setTimeout(async () => {
          await sendPost.sendText(ctx, 'ü•≥ üéâü§©–ü–û–ó–î–†–ê–í–õ–Ø–Æü§©üéâü•≥\n\n–¢—ã –≤—ã–ø–æ–ª–Ω–∏–ª –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è –∏ –∑–∞—Ä–∞–±–æ—Ç–∞–ª  9Ô∏è‚É£0Ô∏è‚É£0Ô∏è‚É£0Ô∏è‚É£ –±–æ–Ω—É—Å–Ω—ã—Ö —Ä—É–±–ª–µ–πüí∏')
            .then(async () => {
              await sendPost.sendURL(ctx, 'https://youtu.be/5uj84NeUnvQ')
                .then(() => {
                  setTimeout(async () => {
                    await sendPost.sendTextWithButton(ctx, 'üí° –í–æ—Ç, –Ω–∞–∫–æ–Ω–µ—Ü, —Ç—ã –¥–æ–±—Ä–∞–ª—Å—è –¥–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –Ω–∞—É—á–∏—Ç—å—Å—è —Ä–∏—Å–æ–≤–∞—Ç—å –º–µ–≥–∞-—Å—É–ø–µ—Ä-–ø—É—à–∫–∞-–±–æ–º–±–∞ –∫—Ä—É—Ç—ã–µ –ø–æ—Ä—Ç—Ä–µ—Ç—ã –∏ —É–∑–Ω–∞—Ç—å –æ –Ω–∏—Ö –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã...\n\nP.S. –û–≥–æ–≤–æ—Ä–æ—á–∫–∞üôä\n–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —è —Ä–∞—Å–∫—Ä—ã–≤–∞—é —Ç–æ–ª—å–∫–æ –Ω–∞ –∫—É—Ä—Å–µ, –Ω–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö (–∞ –∏–º–µ–Ω–Ω–æ 50) —Ç—ã —Å–º–æ–∂–µ—à—å —É–∑–Ω–∞—Ç—å –∏–∑ —É—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–µ–±–µ –ø–æ —Å—Å—ã–ª–∫–µ –Ω–∏–∂–µüëáüèª\n\n–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–∞–∫–æ–≥–æ —É—Ä–æ–∫–∞ 10.000‚ÇΩ, –Ω–æ —Ç–æ–ª—å–∫–æ —Ç–æ–º—É, –∫—Ç–æ –≤—ã–ø–æ–ª–Ω–∏–ª –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è –∏ –∑–∞—Ä–∞–±–æ—Ç–∞–ª 9000 –ë–†üí∏, —É—Ä–æ–∫ –¥–æ—Å—Ç—É–ø–µ–Ω –≤—Å–µ–≥–æ –∑–∞ 9Ô∏è‚É£9Ô∏è‚É£0Ô∏è‚É£‚ÇΩ\n\n–¢—ã —Ö–æ—Ä–æ—à–æ –ø–æ—Å—Ç–∞—Ä–∞–ª—Å—è –∏ –µ—Å–ª–∏ –ø—Ä–∏–æ–±—Ä–µ—Ç—ë—à—å –¥–∞–Ω–Ω—ã–π —É—Ä–æ–∫ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤, —Ç–æ –ø–æ–ª—É—á–∏—à—å –µ—â—ë —Ü–µ–ª—ã—Ö 2 –ø–æ–¥–∞—Ä–∫–∞:\n\nüéÅ–ú–µ—Ç–æ–¥–∏—á–∫–∞ —Å –ø–æ—à–∞–≥–æ–≤—ã–º —Ä–∏—Å–æ–≤–∞–Ω–∏–µ–º –ø–æ—Ä—Ç—Ä–µ—Ç–∞, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –º–Ω–æ–π –ª–∏—á–Ω–æ.\nüéÅ–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —É—Ä–æ–∫ –ø–æ –Ω–∞–ª–æ–∂–µ–Ω–∏—é —à—Ç—Ä–∏—Ö–æ–≤–∫–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–µ –æ–±—ä—ë–º–∞Q', [['–•–æ—á—É —É—Ä–æ–∫ –∏ –ø–æ–¥–∞—Ä–∫–∏üéÅüéÅüéÅ', 'https://valeriya-artist.ru/tg']], true)
                  }, 1000*60*2)
                })
            })
        }, 1000*60*60)
      })
    connectDB.update(ctx.message.from?.id, '–ü–æ—Å–ª–µ–¥–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ', 'btn_end')
  } else sendPost.sendText(ctx, '–•–º, –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω—ã, –ø–æ–ø—Ä–æ–±—É–π –µ—â–µ')
})

module.exports.lastTask = lastTask